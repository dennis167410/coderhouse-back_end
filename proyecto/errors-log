{"level":"error","message":"Erroreee:  error is not defined","stack":"ReferenceError: error is not defined\n    at getUserById (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:27:38)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/middleware/handle-policies.middleware.js:23:16\n    at strategy.success (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/config/passport.config.js:37:28)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\passport-jwt\\lib\\strategy.js:123:34\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\jsonwebtoken\\verify.js:261:12\n    at getSecret (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\jsonwebtoken\\verify.js:97:14)"}
{"level":"error","message":"Error "}
{"level":"error","message":"Error "}
{"level":"error","message":"Error usuario no encontrado o id no es válido."}
{"level":"error","message":"Error al intentar eliminar el usuario. "}
{"level":"error","message":"Error al intentar eliminar el usuario. "}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error  error is not defined","stack":"ReferenceError: error is not defined\n    at createProduct (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/product.controller.js:57:65)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error  error is not defined","stack":"ReferenceError: error is not defined\n    at createProduct (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/product.controller.js:57:65)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error al buscar el producto. El producto no existe."}
{"level":"error","message":"Error,  CastError: Cast to ObjectId failed for value \"65ceb99486869118617b2cefeee\" (type string) at path \"_id\" for model \"products\"","stack":"Error: CastError: Cast to ObjectId failed for value \"65ceb99486869118617b2cefeee\" (type string) at path \"_id\" for model \"products\"\n    at ProductManager.updateProduct (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/dao/managers/ProductManager.js:135:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updateProduct (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/product.controller.js:206:25)"}
{"level":"error","message":"Error,  product is not defined","stack":"ReferenceError: product is not defined\n    at updateProduct (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/product.controller.js:215:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'error')","stack":"TypeError: Cannot read properties of undefined (reading 'error')\n    at agregaProductoAlCarrito (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:67:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"Error al intentar actualizar el carrito"}
{"level":"error","message":"Error al intentar actualizar el carrito"}
{"level":"error","message":"Error al intentar actualizar el carrito"}
{"level":"error","message":"Error al intentar actualizar el carrito"}
{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"6634ec24759964118463c86d3\" (type string) at path \"_id\" for model \"carts\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"6634ec24759964118463c86d3\"","value":"6634ec24759964118463c86d3","valueType":"string"}
{"level":"error","message":"Error al intentar eliminar el producto del carrito."}
{"level":"error","message":"Error al intentar eliminar el producto del carrito."}
{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"6634ec24759964118463c86d4\" (type string) at path \"_id\" for model \"carts\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"6634ec24759964118463c86d4\"","value":"6634ec24759964118463c86d4","valueType":"string"}
{"level":"fatal","message":"Petición con fatal"}
{"level":"error","message":"Petición con error"}
{"level":"fatal","message":"Petición fatal"}
{"level":"error","message":"Petición error"}
{"level":"error","message":"Error,  jwt is not defined","stack":"ReferenceError: jwt is not defined\n    at recoverPasswd2 (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:68:19)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Error,  vvc is not defined","stack":"ReferenceError: vvc is not defined\n    at recoverPasswd2 (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:69:1)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Error,  Cannot read properties of undefined (reading 'emailReceiver')","stack":"TypeError: Cannot read properties of undefined (reading 'emailReceiver')\n    at recoverPasswd2 (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:72:60)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Error,  Cannot read properties of undefined (reading 'emailReceiver')","stack":"TypeError: Cannot read properties of undefined (reading 'emailReceiver')\n    at recoverPasswd2 (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:70:55)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Error,  Cannot read properties of undefined (reading 'emailReceiver')","stack":"TypeError: Cannot read properties of undefined (reading 'emailReceiver')\n    at recoverPasswd2 (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:70:55)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Error,  Cannot read properties of undefined (reading 'user')","stack":"TypeError: Cannot read properties of undefined (reading 'user')\n    at recoverPasswd2 (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:70:53)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Los mails no coinciden."}
{"level":"error","message":"Los mails no coinciden."}
{"level":"error","message":"Los emails no coinciden."}
{"level":"error","message":"Los emails no coinciden."}
{"level":"error","message":"Error al cambiar el rol del usuario: this.userService.findById is not a function","stack":"TypeError: this.userService.findById is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:89:49)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)"}
{"level":"error","message":"Error usuario no encontrado o el formato del id no es válido."}
{"level":"error","message":"Error usuario no encontrado o el formato del id no es válido."}
{"level":"error","message":"Error usuario no encontrado o el formato del id no es válido."}
{"level":"error","message":"Error usuario no encontrado o el formato del id no es válido."}
{"level":"error","message":"Error usuario no encontrado o el formato del id no es válido."}
{"level":"error","message":"Error usuario no encontrado o el formato del id no es válido."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"Error de registro:  Cannot access 'first_name' before initialization","stack":"ReferenceError: Cannot access 'first_name' before initialization\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:159:21)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":401}
{"level":"error","message":401}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":["65d0325d85a2ed7cf68b7030","6641616fc2e50c062c0cd5b1"]}
{"level":"error","message":["65d0325d85a2ed7cf68b7030","6641616fc2e50c062c0cd5b1"]}
{"level":"error","message":["65d0325d85a2ed7cf68b7030","6641616fc2e50c062c0cd5b1"]}
{"level":"error","message":"Error al intentar actualizar el carrito"}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"Carrito no encontrado."}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"El carrito no existe"}
{"level":"error","message":"Error de registro:  Assignment to constant variable.","stack":"TypeError: Assignment to constant variable.\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:165:10)"}
{"_message":"users validation failed","errors":{"role":{"kind":"enum","message":"`public` is not a valid enum value for path `role`.","name":"ValidatorError","path":"role","properties":{"enumValues":["USER","ADMIN","PREMIUM","PUBLIC"],"message":"`public` is not a valid enum value for path `role`.","path":"role","type":"enum","value":"public"},"value":"public"}},"level":"error","message":"Error de registro:  users validation failed: role: `public` is not a valid enum value for path `role`.","stack":"ValidationError: users validation failed: role: `public` is not a valid enum value for path `role`.\n    at Document.invalidate (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:3201:32)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:2994:17\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\schemaType.js:1370:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)"}
{"level":"error","message":"error: newUser is not defined","stack":"ReferenceError: newUser is not defined\n    at file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/routing/email.routes.js:59:87\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error de registro:  last_connection is not defined","stack":"ReferenceError: last_connection is not defined\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:179:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error de registro:  last_connection is not defined","stack":"ReferenceError: last_connection is not defined\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:179:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error de registro:  last_connection is not defined","stack":"ReferenceError: last_connection is not defined\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:179:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error de registro:  last_connection is not defined","stack":"ReferenceError: last_connection is not defined\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:179:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error de registro:  last_connection is not defined","stack":"ReferenceError: last_connection is not defined\n    at register (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/session.controller.js:180:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error:  handleResponse is not defined","stack":"ReferenceError: handleResponse is not defined\n    at getUsers (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:19:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error:  handleResponse is not defined","stack":"ReferenceError: handleResponse is not defined\n    at getUsers (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:19:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error:  Cannot read properties of undefined (reading 'forEach')","stack":"TypeError: Cannot read properties of undefined (reading 'forEach')\n    at UserController.handleResponse (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:117:24)\n    at getUsers (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:17:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error:  userData.forEach is not a function","stack":"TypeError: userData.forEach is not a function\n    at getUserById (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:36:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: this.userService.getUserEmailByEmail is not a function","stack":"TypeError: this.userService.getUserEmailByEmail is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:104:49)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: this.userService.getUserEmailByEmail is not a function","stack":"TypeError: this.userService.getUserEmailByEmail is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:104:49)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: Uid is not defined","stack":"ReferenceError: Uid is not defined\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:102:46)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:421:3)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: conso is not defined","stack":"ReferenceError: conso is not defined\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:97:11)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:421:3)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: console.leg is not a function","stack":"TypeError: console.leg is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:97:19)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at param (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:421:3)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: user.save is not a function","stack":"TypeError: user.save is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:121:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: user.save is not a function","stack":"TypeError: user.save is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:118:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error al intentar cambiar el rol del usuario: user.save is not a function","stack":"TypeError: user.save is not a function\n    at updateUserRole (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/user.controller.js:118:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error  Cannot read properties of undefined (reading 'owner')","stack":"TypeError: Cannot read properties of undefined (reading 'owner')\n    at deleteProductById (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/product.controller.js:177:48)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"Error...  productId is not defined","stack":"ReferenceError: productId is not defined\n    at creaCarritoConProductosDesdeLaVista (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:137:62)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at Route.dispatch (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:114:3)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\index.js:47:12)"}
{"level":"error","message":"Error...  result is not defined","stack":"ReferenceError: result is not defined\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:44:144)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  result is not defined","stack":"ReferenceError: result is not defined\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:44:144)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:17:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:45:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:45:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:18:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":401}
{"level":"error","message":401}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":"Error, no se pudo agregar el carrito al usuario."}
{"level":"error","message":401}
{"level":"error","message":401}
{"level":"error","message":401}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:43:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:43:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:43:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:43:56)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:43:61)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:45:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:46:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:46:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[[],null]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:46:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[[],null]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:46:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[[],null]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:46:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":"Error...  Cannot read properties of undefined (reading 'amount')","stack":"TypeError: Cannot read properties of undefined (reading 'amount')\n    at finalizePurchase (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:46:190)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":[]}
{"level":"error","message":[]}
{"level":"error","message":[{"__v":0,"_id":"6682287c19933ea41e408cee","amount":1200,"code":"2","purchase_datetime":"2024-07-01T03:54:36.673Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"668229223f2fd5b97b16584f","amount":550,"code":"3","purchase_datetime":"2024-07-01T03:57:22.419Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"668229993f2fd5b97b16587c","amount":550,"code":"4","purchase_datetime":"2024-07-01T03:59:21.310Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"668229bc3f2fd5b97b1658a9","amount":550,"code":"5","purchase_datetime":"2024-07-01T03:59:56.700Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822a0b3f2fd5b97b1658de","amount":550,"code":"6","purchase_datetime":"2024-07-01T04:01:15.984Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822a233f2fd5b97b165913","amount":550,"code":"7","purchase_datetime":"2024-07-01T04:01:39.186Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822a923c6d248f030bb814","amount":550,"code":"8","purchase_datetime":"2024-07-01T04:03:30.226Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822aaa3c6d248f030bb851","amount":550,"code":"9","purchase_datetime":"2024-07-01T04:03:54.518Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822ac53c6d248f030bb891","amount":0,"code":"10","purchase_datetime":"2024-07-01T04:04:21.887Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822b353c6d248f030bb8d7","amount":0,"code":"11","purchase_datetime":"2024-07-01T04:06:13.270Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822b643c6d248f030bb91f","amount":0,"code":"12","purchase_datetime":"2024-07-01T04:07:00.590Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822bc77774a0d8a934c395","amount":0,"code":"13","purchase_datetime":"2024-07-01T04:08:39.468Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822be5e802dec7d7d9519b","amount":0,"code":"14","purchase_datetime":"2024-07-01T04:09:09.505Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822c08a2bc27bfc05df257","amount":0,"code":"15","purchase_datetime":"2024-07-01T04:09:44.308Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822dc97128aae626bff698","amount":829,"code":"1","purchase_datetime":"2024-07-01T04:17:13.075Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822e2161dea7e6307d06e1","amount":829,"code":"2","purchase_datetime":"2024-07-01T04:18:41.701Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822e82f17e6c93eb88d010","amount":829,"code":"3","purchase_datetime":"2024-07-01T04:20:18.426Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822f14796e1b2a7224b648","amount":829,"code":"4","purchase_datetime":"2024-07-01T04:22:44.096Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"66822f82362ea4b110e6d425","amount":829,"code":"5","purchase_datetime":"2024-07-01T04:24:34.695Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6682300f7bc6995b18eefda9","amount":829,"code":"6","purchase_datetime":"2024-07-01T04:26:55.686Z","purchaser":"pato@lino.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6682f399d32d91a7786a9e03","amount":1393,"code":"1","purchase_datetime":"2024-07-01T18:21:13.395Z","purchaser":"plino@gmail.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6683056c6996cd4c5a9d9511","amount":547,"code":"2","purchase_datetime":"2024-07-01T19:37:16.508Z","purchaser":"dennis.mrodriguezc@gmail.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6683058a6996cd4c5a9d9531","amount":2990,"code":"3","purchase_datetime":"2024-07-01T19:37:46.561Z","purchaser":"dennis.mrodriguezc@gmail.com"}]}
{"_message":"users validation failed","errors":{"role":{"kind":"enum","message":"`` is not a valid enum value for path `role`.","name":"ValidatorError","path":"role","properties":{"enumValues":["USER","ADMIN","PREMIUM","PUBLIC"],"message":"`` is not a valid enum value for path `role`.","path":"role","type":"enum","value":""},"value":""}},"level":"error","message":"Error de registro:  users validation failed: role: `` is not a valid enum value for path `role`.","stack":"ValidationError: users validation failed: role: `` is not a valid enum value for path `role`.\n    at Document.invalidate (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:3201:32)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:2994:17\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\schemaType.js:1370:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)"}
{"_message":"users validation failed","errors":{"role":{"kind":"enum","message":"`` is not a valid enum value for path `role`.","name":"ValidatorError","path":"role","properties":{"enumValues":["USER","ADMIN","PREMIUM","PUBLIC"],"message":"`` is not a valid enum value for path `role`.","path":"role","type":"enum","value":""},"value":""}},"level":"error","message":"Error de registro:  users validation failed: role: `` is not a valid enum value for path `role`.","stack":"ValidationError: users validation failed: role: `` is not a valid enum value for path `role`.\n    at Document.invalidate (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:3201:32)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:2994:17\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\schemaType.js:1370:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)"}
{"_message":"users validation failed","errors":{"role":{"kind":"enum","message":"`` is not a valid enum value for path `role`.","name":"ValidatorError","path":"role","properties":{"enumValues":["USER","ADMIN","PREMIUM","PUBLIC"],"message":"`` is not a valid enum value for path `role`.","path":"role","type":"enum","value":""},"value":""}},"level":"error","message":"Error de registro:  users validation failed: role: `` is not a valid enum value for path `role`.","stack":"ValidationError: users validation failed: role: `` is not a valid enum value for path `role`.\n    at Document.invalidate (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:3201:32)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\document.js:2994:17\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\mongoose\\lib\\schemaType.js:1370:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)"}
{"level":"error","message":"Error  UserService is not a constructor","stack":"TypeError: UserService is not a constructor\n    at deleteProductById (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/product.controller.js:211:33)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Error...  productId is not defined","stack":"ReferenceError: productId is not defined\n    at creaCarritoConProductos (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/controlador/cart.controller.js:187:58)\n    at Layer.handle [as handle_request] (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\express\\lib\\router\\route.js:144:13)\n    at file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/middleware/handle-policies.middleware.js:23:16\n    at strategy.success (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (file:///D:/Programacion_BackEnd/coderhouse-back_end/proyecto/src/config/passport.config.js:37:28)\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\passport-jwt\\lib\\strategy.js:123:34\n    at D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\jsonwebtoken\\verify.js:261:12\n    at getSecret (D:\\Programacion_BackEnd\\coderhouse-back_end\\proyecto\\node_modules\\jsonwebtoken\\verify.js:97:14)"}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":[{"__v":0,"_id":"6686a6d7ea75217346a07691","amount":1060,"code":"1","purchase_datetime":"2024-07-04T13:42:47.005Z","purchaser":"dennis.mrodriguezc@gmail.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6686a700ea75217346a076c1","amount":11193,"code":"2","purchase_datetime":"2024-07-04T13:43:28.636Z","purchaser":"dennis.mrodriguezc@gmail.com"}]}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":"El producto no pudo ser agregado al carrito."}
{"level":"error","message":[{"__v":0,"_id":"6686d714174e25d3d4a8395d","amount":273,"code":"3","purchase_datetime":"2024-07-04T17:08:36.889Z","purchaser":"dennis.mrodriguezc@gmail.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6686e3515f1b0fdcfd30e926","amount":5300,"code":"4","purchase_datetime":"2024-07-04T18:00:49.813Z","purchaser":"plucas@gmail.com"}]}
{"level":"error","message":[{"__v":0,"_id":"6686e4805f1b0fdcfd30e979","amount":2730,"code":"5","purchase_datetime":"2024-07-04T18:05:52.190Z","purchaser":"dennis.mrodriguezc@gmail.com"}]}
